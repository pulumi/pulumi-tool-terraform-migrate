{"version":4,"terraform_version":"1.10.6","serial":28,"lineage":"55f5a7db-794c-dac7-e855-8c6c74a04c0e","outputs":{"data_lake_bucket_arn":{"value":"arn:aws:s3:::data-pipeline4-data-lake-616138583583","type":"string"},"data_lake_bucket_name":{"value":"data-pipeline4-data-lake-616138583583","type":"string"},"dynamodb_table_name":{"value":"data-pipeline4-file-metadata","type":"string"},"lambda_artifacts_bucket_name":{"value":"data-pipeline4-lambda-artifacts-616138583583","type":"string"},"lambda_function_arn":{"value":"arn:aws:lambda:us-east-1:616138583583:function:data-pipeline4-data-processor","type":"string"},"sqs_queue_url":{"value":"https://sqs.us-east-1.amazonaws.com/616138583583/data-pipeline4-data-processing","type":"string"}},"resources":[{"mode":"data","type":"archive_file","name":"lambda_placeholder","provider":"provider[\"registry.opentofu.org/hashicorp/archive\"]","instances":[{"schema_version":0,"attributes":{"exclude_symlink_directories":null,"excludes":null,"id":"feb9faca2458af0cc39876202cb108a5ff21cd96","output_base64sha256":"Uk59ixjEaDAJDlKLgE/2RRsCDSterPmhbfoI1psRc90=","output_base64sha512":"VE8QFCUqfjU/7PifbHicgqeq7k6UxmOF8hpRYLL7HzQ/+eYk60INBKsmpwT/39GVFJQEU12CQ9GZ+BzAxkWmlw==","output_file_mode":null,"output_md5":"f96fd3fa1c2b9e91c4e9bb893467e770","output_path":"./lambda_function.zip","output_sha":"feb9faca2458af0cc39876202cb108a5ff21cd96","output_sha256":"524e7d8b18c46830090e528b804ff6451b020d2b5eacf9a16dfa08d69b1173dd","output_sha512":"544f1014252a7e353fecf89f6c789c82a7aaee4e94c66385f21a5160b2fb1f343ff9e624eb420d04ab26a704ffdfd195149404535d8243d199f81cc0c645a697","output_size":459,"source":[{"content":"import json\nimport boto3\n\ndef handler(event, context):\n    print(f\"Received event: {json.dumps(event)}\")\n          \n    s3_client = boto3.client('s3')\n          \n    for record in event.get('Records', []):\n        body = json.loads(record['body'])\n        message = json.loads(body.get('Message', '{}'))\n              \n        for s3_record in message.get('Records', []):\n            bucket = s3_record['s3']['bucket']['name']\n            key = s3_record['s3']['object']['key']\n            print(f\"Processing: s3://{bucket}/{key}\")\n          \n    return {\n        'statusCode': 200,\n        'body': json.dumps('Processing complete')\n    }\n","filename":"lambda_function.py"}],"source_content":null,"source_content_filename":null,"source_dir":null,"source_file":null,"type":"zip"},"sensitive_attributes":[]}]},{"mode":"data","type":"aws_caller_identity","name":"current","provider":"provider[\"registry.opentofu.org/hashicorp/aws\"]","instances":[{"schema_version":0,"attributes":{"account_id":"616138583583","arn":"arn:aws:sts::616138583583:assumed-role/AWSReservedSSO_AdministratorAccess_224e23fb315b65cb/anton@pulumi.com","id":"616138583583","user_id":"AROAY65FYVYP6E2HSUXEV:anton@pulumi.com"},"sensitive_attributes":[]}]},{"mode":"data","type":"aws_region","name":"current","provider":"provider[\"registry.opentofu.org/hashicorp/aws\"]","instances":[{"schema_version":0,"attributes":{"description":"US East (N. Virginia)","endpoint":"ec2.us-east-1.amazonaws.com","id":"us-east-1","name":"us-east-1","region":"us-east-1"},"sensitive_attributes":[]}]},{"mode":"managed","type":"aws_cloudwatch_log_group","name":"lambda_logs","provider":"provider[\"registry.opentofu.org/hashicorp/aws\"]","instances":[{"schema_version":0,"attributes":{"arn":"arn:aws:logs:us-east-1:616138583583:log-group:/aws/lambda/data-pipeline4-data-processor","id":"/aws/lambda/data-pipeline4-data-processor","kms_key_id":"","log_group_class":"STANDARD","name":"/aws/lambda/data-pipeline4-data-processor","name_prefix":"","region":"us-east-1","retention_in_days":14,"skip_destroy":false,"tags":{"Purpose":"Lambda Logs"},"tags_all":{"Environment":"dev","ManagedBy":"Terraform","Project":"data-pipeline4","Purpose":"Lambda Logs"}},"sensitive_attributes":[],"private":"bnVsbA==","dependencies":["aws_iam_role.lambda_role","aws_lambda_function.data_processor","data.archive_file.lambda_placeholder","data.aws_caller_identity.current","module.data_lake_bucket.aws_s3_bucket.this","module.data_lake_bucket.aws_s3_directory_bucket.this"]}]},{"mode":"managed","type":"aws_dynamodb_table","name":"file_metadata","provider":"provider[\"registry.opentofu.org/hashicorp/aws\"]","instances":[{"schema_version":1,"attributes":{"arn":"arn:aws:dynamodb:us-east-1:616138583583:table/data-pipeline4-file-metadata","attribute":[{"name":"file_id","type":"S"},{"name":"status","type":"S"},{"name":"timestamp","type":"N"}],"billing_mode":"PAY_PER_REQUEST","deletion_protection_enabled":false,"global_secondary_index":[{"hash_key":"status","name":"status-index","non_key_attributes":[],"on_demand_throughput":[],"projection_type":"ALL","range_key":"timestamp","read_capacity":0,"warm_throughput":[],"write_capacity":0}],"hash_key":"file_id","id":"data-pipeline4-file-metadata","import_table":[],"local_secondary_index":[],"name":"data-pipeline4-file-metadata","on_demand_throughput":[],"point_in_time_recovery":[{"enabled":true,"recovery_period_in_days":35}],"range_key":"timestamp","read_capacity":0,"region":"us-east-1","replica":[],"restore_date_time":null,"restore_source_name":null,"restore_source_table_arn":null,"restore_to_latest_time":null,"server_side_encryption":[],"stream_arn":"","stream_enabled":false,"stream_label":"","stream_view_type":"","table_class":"STANDARD","tags":{"Purpose":"File Metadata Tracking"},"tags_all":{"Environment":"dev","ManagedBy":"Terraform","Project":"data-pipeline4","Purpose":"File Metadata Tracking"},"timeouts":null,"ttl":[{"attribute_name":"","enabled":false}],"warm_throughput":[],"write_capacity":0},"sensitive_attributes":[],"private":"eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxODAwMDAwMDAwMDAwLCJkZWxldGUiOjYwMDAwMDAwMDAwMCwidXBkYXRlIjozNjAwMDAwMDAwMDAwfSwic2NoZW1hX3ZlcnNpb24iOiIxIn0="}]},{"mode":"managed","type":"aws_iam_role","name":"lambda_role","provider":"provider[\"registry.opentofu.org/hashicorp/aws\"]","instances":[{"schema_version":0,"attributes":{"arn":"arn:aws:iam::616138583583:role/data-pipeline4-lambda-role","assume_role_policy":"{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"lambda.amazonaws.com\"}}],\"Version\":\"2012-10-17\"}","create_date":"2025-12-16T22:13:57Z","description":"","force_detach_policies":false,"id":"data-pipeline4-lambda-role","inline_policy":[],"managed_policy_arns":[],"max_session_duration":3600,"name":"data-pipeline4-lambda-role","name_prefix":"","path":"/","permissions_boundary":"","tags":{"Purpose":"Lambda Execution Role"},"tags_all":{"Environment":"dev","ManagedBy":"Terraform","Project":"data-pipeline4","Purpose":"Lambda Execution Role"},"unique_id":"AROAY65FYVYPRMQKBEKAD"},"sensitive_attributes":[],"private":"bnVsbA=="}]},{"mode":"managed","type":"aws_iam_role_policy","name":"lambda_s3_access","provider":"provider[\"registry.opentofu.org/hashicorp/aws\"]","instances":[{"schema_version":0,"attributes":{"id":"data-pipeline4-lambda-role:data-pipeline4-lambda-s3-access","name":"data-pipeline4-lambda-s3-access","name_prefix":"","policy":"{\"Version\":\"2012-10-17\",\"Statement\":[{\"Action\":[\"s3:GetObject\",\"s3:PutObject\",\"s3:DeleteObject\",\"s3:ListBucket\"],\"Effect\":\"Allow\",\"Resource\":[\"arn:aws:s3:::data-pipeline4-data-lake-616138583583\",\"arn:aws:s3:::data-pipeline4-data-lake-616138583583/*\"]},{\"Action\":[\"sqs:ReceiveMessage\",\"sqs:DeleteMessage\",\"sqs:GetQueueAttributes\"],\"Effect\":\"Allow\",\"Resource\":\"arn:aws:sqs:us-east-1:616138583583:data-pipeline4-data-processing\"},{\"Action\":[\"logs:CreateLogGroup\",\"logs:CreateLogStream\",\"logs:PutLogEvents\"],\"Effect\":\"Allow\",\"Resource\":\"arn:aws:logs:us-east-1:616138583583:*\"}]}","role":"data-pipeline4-lambda-role"},"sensitive_attributes":[],"private":"bnVsbA==","dependencies":["aws_iam_role.lambda_role","aws_sqs_queue.data_processing","aws_sqs_queue.data_processing_dlq","data.aws_caller_identity.current","data.aws_region.current","module.data_lake_bucket.aws_s3_bucket.this"]}]},{"mode":"managed","type":"aws_lambda_event_source_mapping","name":"sqs_trigger","provider":"provider[\"registry.opentofu.org/hashicorp/aws\"]","instances":[{"schema_version":0,"attributes":{"amazon_managed_kafka_event_source_config":[],"arn":"arn:aws:lambda:us-east-1:616138583583:event-source-mapping:23b43344-fc36-473f-8843-e1faa46090ad","batch_size":10,"bisect_batch_on_function_error":false,"destination_config":[],"document_db_event_source_config":[],"enabled":true,"event_source_arn":"arn:aws:sqs:us-east-1:616138583583:data-pipeline4-data-processing","filter_criteria":[],"function_arn":"arn:aws:lambda:us-east-1:616138583583:function:data-pipeline4-data-processor","function_name":"arn:aws:lambda:us-east-1:616138583583:function:data-pipeline4-data-processor","function_response_types":null,"id":"23b43344-fc36-473f-8843-e1faa46090ad","kms_key_arn":"","last_modified":"2025-12-16T22:14:56Z","last_processing_result":"","maximum_batching_window_in_seconds":0,"maximum_record_age_in_seconds":0,"maximum_retry_attempts":0,"metrics_config":[],"parallelization_factor":0,"provisioned_poller_config":[],"queues":null,"region":"us-east-1","scaling_config":[],"self_managed_event_source":[],"self_managed_kafka_event_source_config":[],"source_access_configuration":[],"starting_position":"","starting_position_timestamp":"","state":"Enabled","state_transition_reason":"USER_INITIATED","tags":null,"tags_all":{"Environment":"dev","ManagedBy":"Terraform","Project":"data-pipeline4"},"topics":null,"tumbling_window_in_seconds":0,"uuid":"23b43344-fc36-473f-8843-e1faa46090ad"},"sensitive_attributes":[],"private":"bnVsbA==","dependencies":["aws_iam_role.lambda_role","aws_lambda_function.data_processor","aws_sqs_queue.data_processing","aws_sqs_queue.data_processing_dlq","data.archive_file.lambda_placeholder","data.aws_caller_identity.current","module.data_lake_bucket.aws_s3_bucket.this","module.data_lake_bucket.aws_s3_directory_bucket.this"]}]},{"mode":"managed","type":"aws_lambda_function","name":"data_processor","provider":"provider[\"registry.opentofu.org/hashicorp/aws\"]","instances":[{"schema_version":0,"attributes":{"architectures":["x86_64"],"arn":"arn:aws:lambda:us-east-1:616138583583:function:data-pipeline4-data-processor","code_sha256":"Uk59ixjEaDAJDlKLgE/2RRsCDSterPmhbfoI1psRc90=","code_signing_config_arn":"","dead_letter_config":[],"description":"","environment":[{"variables":{"DATA_LAKE_BUCKET":"data-pipeline4-data-lake-616138583583","ENVIRONMENT":"dev"}}],"ephemeral_storage":[{"size":512}],"file_system_config":[],"filename":"./lambda_function.zip","function_name":"data-pipeline4-data-processor","handler":"lambda_function.handler","id":"data-pipeline4-data-processor","image_config":[],"image_uri":"","invoke_arn":"arn:aws:apigateway:us-east-1:lambda:path/2015-03-31/functions/arn:aws:lambda:us-east-1:616138583583:function:data-pipeline4-data-processor/invocations","kms_key_arn":"","last_modified":"2025-12-16T22:14:06.432+0000","layers":null,"logging_config":[{"application_log_level":"","log_format":"Text","log_group":"/aws/lambda/data-pipeline4-data-processor","system_log_level":""}],"memory_size":256,"package_type":"Zip","publish":false,"qualified_arn":"arn:aws:lambda:us-east-1:616138583583:function:data-pipeline4-data-processor:$LATEST","qualified_invoke_arn":"arn:aws:apigateway:us-east-1:lambda:path/2015-03-31/functions/arn:aws:lambda:us-east-1:616138583583:function:data-pipeline4-data-processor:$LATEST/invocations","region":"us-east-1","replace_security_groups_on_destroy":null,"replacement_security_group_ids":null,"reserved_concurrent_executions":-1,"role":"arn:aws:iam::616138583583:role/data-pipeline4-lambda-role","runtime":"python3.11","s3_bucket":null,"s3_key":null,"s3_object_version":null,"signing_job_arn":"","signing_profile_version_arn":"","skip_destroy":false,"snap_start":[],"source_code_hash":"Uk59ixjEaDAJDlKLgE/2RRsCDSterPmhbfoI1psRc90=","source_code_size":459,"source_kms_key_arn":"","tags":{"Purpose":"Data Processing"},"tags_all":{"Environment":"dev","ManagedBy":"Terraform","Project":"data-pipeline4","Purpose":"Data Processing"},"timeout":60,"timeouts":null,"tracing_config":[{"mode":"PassThrough"}],"version":"$LATEST","vpc_config":[]},"sensitive_attributes":[],"private":"eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6NjAwMDAwMDAwMDAwLCJ1cGRhdGUiOjYwMDAwMDAwMDAwMH19","dependencies":["aws_iam_role.lambda_role","data.archive_file.lambda_placeholder","data.aws_caller_identity.current","module.data_lake_bucket.aws_s3_bucket.this","module.data_lake_bucket.aws_s3_directory_bucket.this"]}]},{"mode":"managed","type":"aws_s3_bucket","name":"lambda_artifacts","provider":"provider[\"registry.opentofu.org/hashicorp/aws\"]","instances":[{"schema_version":0,"attributes":{"acceleration_status":"","acl":null,"arn":"arn:aws:s3:::data-pipeline4-lambda-artifacts-616138583583","bucket":"data-pipeline4-lambda-artifacts-616138583583","bucket_domain_name":"data-pipeline4-lambda-artifacts-616138583583.s3.amazonaws.com","bucket_prefix":"","bucket_region":"us-east-1","bucket_regional_domain_name":"data-pipeline4-lambda-artifacts-616138583583.s3.us-east-1.amazonaws.com","cors_rule":[],"force_destroy":false,"grant":[{"id":"e07865a5679c7977370948f1f1e51c21b12d8cfdd396a7e3172275d9164e01b8","permissions":["FULL_CONTROL"],"type":"CanonicalUser","uri":""}],"hosted_zone_id":"Z3AQBSTGFYJSTF","id":"data-pipeline4-lambda-artifacts-616138583583","lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"object_lock_enabled":false,"policy":"","region":"us-east-1","replication_configuration":[],"request_payer":"BucketOwner","server_side_encryption_configuration":[{"rule":[{"apply_server_side_encryption_by_default":[{"kms_master_key_id":"","sse_algorithm":"AES256"}],"bucket_key_enabled":false}]}],"tags":{"Purpose":"Lambda Deployment Artifacts"},"tags_all":{"Environment":"dev","ManagedBy":"Terraform","Project":"data-pipeline4","Purpose":"Lambda Deployment Artifacts"},"timeouts":null,"versioning":[{"enabled":false,"mfa_delete":false}],"website":[],"website_domain":null,"website_endpoint":null},"sensitive_attributes":[],"private":"eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxMjAwMDAwMDAwMDAwLCJkZWxldGUiOjM2MDAwMDAwMDAwMDAsInJlYWQiOjEyMDAwMDAwMDAwMDAsInVwZGF0ZSI6MTIwMDAwMDAwMDAwMH19","dependencies":["data.aws_caller_identity.current"]}]},{"mode":"managed","type":"aws_s3_bucket_public_access_block","name":"lambda_artifacts","provider":"provider[\"registry.opentofu.org/hashicorp/aws\"]","instances":[{"schema_version":0,"attributes":{"block_public_acls":true,"block_public_policy":true,"bucket":"data-pipeline4-lambda-artifacts-616138583583","id":"data-pipeline4-lambda-artifacts-616138583583","ignore_public_acls":true,"region":"us-east-1","restrict_public_buckets":true,"skip_destroy":null},"sensitive_attributes":[],"private":"bnVsbA==","dependencies":["aws_s3_bucket.lambda_artifacts","data.aws_caller_identity.current"]}]},{"mode":"managed","type":"aws_s3_bucket_server_side_encryption_configuration","name":"lambda_artifacts","provider":"provider[\"registry.opentofu.org/hashicorp/aws\"]","instances":[{"schema_version":0,"attributes":{"bucket":"data-pipeline4-lambda-artifacts-616138583583","expected_bucket_owner":"","id":"data-pipeline4-lambda-artifacts-616138583583","region":"us-east-1","rule":[{"apply_server_side_encryption_by_default":[{"kms_master_key_id":"","sse_algorithm":"AES256"}],"bucket_key_enabled":null}]},"sensitive_attributes":[],"private":"bnVsbA==","dependencies":["aws_s3_bucket.lambda_artifacts","data.aws_caller_identity.current"]}]},{"mode":"managed","type":"aws_s3_bucket_versioning","name":"lambda_artifacts","provider":"provider[\"registry.opentofu.org/hashicorp/aws\"]","instances":[{"schema_version":0,"attributes":{"bucket":"data-pipeline4-lambda-artifacts-616138583583","expected_bucket_owner":"","id":"data-pipeline4-lambda-artifacts-616138583583","mfa":null,"region":"us-east-1","versioning_configuration":[{"mfa_delete":"","status":"Enabled"}]},"sensitive_attributes":[],"private":"bnVsbA==","dependencies":["aws_s3_bucket.lambda_artifacts","data.aws_caller_identity.current"]}]},{"mode":"managed","type":"aws_sns_topic","name":"s3_notifications","provider":"provider[\"registry.opentofu.org/hashicorp/aws\"]","instances":[{"schema_version":0,"attributes":{"application_failure_feedback_role_arn":"","application_success_feedback_role_arn":"","application_success_feedback_sample_rate":0,"archive_policy":"","arn":"arn:aws:sns:us-east-1:616138583583:data-pipeline4-s3-notifications","beginning_archive_time":"","content_based_deduplication":false,"delivery_policy":"","display_name":"","fifo_throughput_scope":"","fifo_topic":false,"firehose_failure_feedback_role_arn":"","firehose_success_feedback_role_arn":"","firehose_success_feedback_sample_rate":0,"http_failure_feedback_role_arn":"","http_success_feedback_role_arn":"","http_success_feedback_sample_rate":0,"id":"arn:aws:sns:us-east-1:616138583583:data-pipeline4-s3-notifications","kms_master_key_id":"","lambda_failure_feedback_role_arn":"","lambda_success_feedback_role_arn":"","lambda_success_feedback_sample_rate":0,"name":"data-pipeline4-s3-notifications","name_prefix":"","owner":"616138583583","policy":"{\"Id\":\"__default_policy_ID\",\"Statement\":[{\"Action\":[\"SNS:GetTopicAttributes\",\"SNS:SetTopicAttributes\",\"SNS:AddPermission\",\"SNS:RemovePermission\",\"SNS:DeleteTopic\",\"SNS:Subscribe\",\"SNS:ListSubscriptionsByTopic\",\"SNS:Publish\"],\"Condition\":{\"StringEquals\":{\"AWS:SourceOwner\":\"616138583583\"}},\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"*\"},\"Resource\":\"arn:aws:sns:us-east-1:616138583583:data-pipeline4-s3-notifications\",\"Sid\":\"__default_statement_ID\"}],\"Version\":\"2008-10-17\"}","region":"us-east-1","signature_version":0,"sqs_failure_feedback_role_arn":"","sqs_success_feedback_role_arn":"","sqs_success_feedback_sample_rate":0,"tags":{"Purpose":"S3 Event Notifications"},"tags_all":{"Environment":"dev","ManagedBy":"Terraform","Project":"data-pipeline4","Purpose":"S3 Event Notifications"},"tracing_config":""},"sensitive_attributes":[],"private":"bnVsbA=="}]},{"mode":"managed","type":"aws_sns_topic_policy","name":"s3_notifications","provider":"provider[\"registry.opentofu.org/hashicorp/aws\"]","instances":[{"schema_version":0,"attributes":{"arn":"arn:aws:sns:us-east-1:616138583583:data-pipeline4-s3-notifications","id":"arn:aws:sns:us-east-1:616138583583:data-pipeline4-s3-notifications","owner":"616138583583","policy":"{\"Statement\":[{\"Action\":\"sns:Publish\",\"Condition\":{\"ArnLike\":{\"aws:SourceArn\":\"arn:aws:s3:::data-pipeline4-data-lake-616138583583\"}},\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"s3.amazonaws.com\"},\"Resource\":\"arn:aws:sns:us-east-1:616138583583:data-pipeline4-s3-notifications\",\"Sid\":\"AllowS3Publish\"}],\"Version\":\"2012-10-17\"}","region":"us-east-1"},"sensitive_attributes":[],"private":"bnVsbA==","dependencies":["aws_sns_topic.s3_notifications","data.aws_caller_identity.current","module.data_lake_bucket.aws_s3_bucket.this"]}]},{"mode":"managed","type":"aws_sns_topic_subscription","name":"sqs_subscription","provider":"provider[\"registry.opentofu.org/hashicorp/aws\"]","instances":[{"schema_version":0,"attributes":{"arn":"arn:aws:sns:us-east-1:616138583583:data-pipeline4-s3-notifications:010996f4-fdd3-4259-847f-aaf2d9e96c41","confirmation_timeout_in_minutes":1,"confirmation_was_authenticated":true,"delivery_policy":"","endpoint":"arn:aws:sqs:us-east-1:616138583583:data-pipeline4-data-processing","endpoint_auto_confirms":false,"filter_policy":"","filter_policy_scope":"","id":"arn:aws:sns:us-east-1:616138583583:data-pipeline4-s3-notifications:010996f4-fdd3-4259-847f-aaf2d9e96c41","owner_id":"616138583583","pending_confirmation":false,"protocol":"sqs","raw_message_delivery":false,"redrive_policy":"","region":"us-east-1","replay_policy":"","subscription_role_arn":"","topic_arn":"arn:aws:sns:us-east-1:616138583583:data-pipeline4-s3-notifications"},"sensitive_attributes":[],"private":"bnVsbA==","dependencies":["aws_sns_topic.s3_notifications","aws_sqs_queue.data_processing","aws_sqs_queue.data_processing_dlq"]}]},{"mode":"managed","type":"aws_sqs_queue","name":"data_processing","provider":"provider[\"registry.opentofu.org/hashicorp/aws\"]","instances":[{"schema_version":0,"attributes":{"arn":"arn:aws:sqs:us-east-1:616138583583:data-pipeline4-data-processing","content_based_deduplication":false,"deduplication_scope":"","delay_seconds":0,"fifo_queue":false,"fifo_throughput_limit":"","id":"https://sqs.us-east-1.amazonaws.com/616138583583/data-pipeline4-data-processing","kms_data_key_reuse_period_seconds":300,"kms_master_key_id":"","max_message_size":262144,"message_retention_seconds":86400,"name":"data-pipeline4-data-processing","name_prefix":"","policy":"","receive_wait_time_seconds":10,"redrive_allow_policy":"","redrive_policy":"{\"deadLetterTargetArn\":\"arn:aws:sqs:us-east-1:616138583583:data-pipeline4-data-processing-dlq\",\"maxReceiveCount\":3}","region":"us-east-1","sqs_managed_sse_enabled":true,"tags":{"Purpose":"Data Processing Queue"},"tags_all":{"Environment":"dev","ManagedBy":"Terraform","Project":"data-pipeline4","Purpose":"Data Processing Queue"},"timeouts":null,"url":"https://sqs.us-east-1.amazonaws.com/616138583583/data-pipeline4-data-processing","visibility_timeout_seconds":300},"sensitive_attributes":[],"private":"eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxODAwMDAwMDAwMDAsImRlbGV0ZSI6MTgwMDAwMDAwMDAwLCJ1cGRhdGUiOjE4MDAwMDAwMDAwMH19","dependencies":["aws_sqs_queue.data_processing_dlq"]}]},{"mode":"managed","type":"aws_sqs_queue","name":"data_processing_dlq","provider":"provider[\"registry.opentofu.org/hashicorp/aws\"]","instances":[{"schema_version":0,"attributes":{"arn":"arn:aws:sqs:us-east-1:616138583583:data-pipeline4-data-processing-dlq","content_based_deduplication":false,"deduplication_scope":"","delay_seconds":0,"fifo_queue":false,"fifo_throughput_limit":"","id":"https://sqs.us-east-1.amazonaws.com/616138583583/data-pipeline4-data-processing-dlq","kms_data_key_reuse_period_seconds":300,"kms_master_key_id":"","max_message_size":262144,"message_retention_seconds":1209600,"name":"data-pipeline4-data-processing-dlq","name_prefix":"","policy":"","receive_wait_time_seconds":0,"redrive_allow_policy":"","redrive_policy":"","region":"us-east-1","sqs_managed_sse_enabled":true,"tags":{"Purpose":"Dead Letter Queue"},"tags_all":{"Environment":"dev","ManagedBy":"Terraform","Project":"data-pipeline4","Purpose":"Dead Letter Queue"},"timeouts":null,"url":"https://sqs.us-east-1.amazonaws.com/616138583583/data-pipeline4-data-processing-dlq","visibility_timeout_seconds":30},"sensitive_attributes":[],"private":"eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxODAwMDAwMDAwMDAsImRlbGV0ZSI6MTgwMDAwMDAwMDAwLCJ1cGRhdGUiOjE4MDAwMDAwMDAwMH19"}]},{"mode":"managed","type":"aws_sqs_queue_policy","name":"data_processing","provider":"provider[\"registry.opentofu.org/hashicorp/aws\"]","instances":[{"schema_version":1,"attributes":{"id":"https://sqs.us-east-1.amazonaws.com/616138583583/data-pipeline4-data-processing","policy":"{\"Statement\":[{\"Action\":\"sqs:SendMessage\",\"Condition\":{\"ArnEquals\":{\"aws:SourceArn\":\"arn:aws:sns:us-east-1:616138583583:data-pipeline4-s3-notifications\"}},\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"sns.amazonaws.com\"},\"Resource\":\"arn:aws:sqs:us-east-1:616138583583:data-pipeline4-data-processing\",\"Sid\":\"AllowSNSMessages\"}],\"Version\":\"2012-10-17\"}","queue_url":"https://sqs.us-east-1.amazonaws.com/616138583583/data-pipeline4-data-processing","region":"us-east-1"},"sensitive_attributes":[],"private":"eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ==","dependencies":["aws_sns_topic.s3_notifications","aws_sqs_queue.data_processing","aws_sqs_queue.data_processing_dlq"]}]},{"module":"module.data_lake_bucket","mode":"data","type":"aws_caller_identity","name":"current","provider":"provider[\"registry.opentofu.org/hashicorp/aws\"]","instances":[{"schema_version":0,"attributes":{"account_id":"616138583583","arn":"arn:aws:sts::616138583583:assumed-role/AWSReservedSSO_AdministratorAccess_224e23fb315b65cb/anton@pulumi.com","id":"616138583583","user_id":"AROAY65FYVYP6E2HSUXEV:anton@pulumi.com"},"sensitive_attributes":[]}]},{"module":"module.data_lake_bucket","mode":"data","type":"aws_partition","name":"current","provider":"provider[\"registry.opentofu.org/hashicorp/aws\"]","instances":[{"schema_version":0,"attributes":{"dns_suffix":"amazonaws.com","id":"aws","partition":"aws","reverse_dns_prefix":"com.amazonaws"},"sensitive_attributes":[]}]},{"module":"module.data_lake_bucket","mode":"data","type":"aws_region","name":"current","provider":"provider[\"registry.opentofu.org/hashicorp/aws\"]","instances":[{"schema_version":0,"attributes":{"description":"US East (N. Virginia)","endpoint":"ec2.us-east-1.amazonaws.com","id":"us-east-1","name":"us-east-1","region":"us-east-1"},"sensitive_attributes":[]}]},{"module":"module.data_lake_bucket","mode":"managed","type":"aws_s3_bucket","name":"this","provider":"provider[\"registry.opentofu.org/hashicorp/aws\"]","instances":[{"index_key":0,"schema_version":0,"attributes":{"acceleration_status":"","acl":null,"arn":"arn:aws:s3:::data-pipeline4-data-lake-616138583583","bucket":"data-pipeline4-data-lake-616138583583","bucket_domain_name":"data-pipeline4-data-lake-616138583583.s3.amazonaws.com","bucket_prefix":"","bucket_region":"us-east-1","bucket_regional_domain_name":"data-pipeline4-data-lake-616138583583.s3.us-east-1.amazonaws.com","cors_rule":[],"force_destroy":false,"grant":[{"id":"e07865a5679c7977370948f1f1e51c21b12d8cfdd396a7e3172275d9164e01b8","permissions":["FULL_CONTROL"],"type":"CanonicalUser","uri":""}],"hosted_zone_id":"Z3AQBSTGFYJSTF","id":"data-pipeline4-data-lake-616138583583","lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"object_lock_enabled":false,"policy":"","region":"us-east-1","replication_configuration":[],"request_payer":"BucketOwner","server_side_encryption_configuration":[{"rule":[{"apply_server_side_encryption_by_default":[{"kms_master_key_id":"","sse_algorithm":"AES256"}],"bucket_key_enabled":false}]}],"tags":{"Purpose":"Data Lake Storage"},"tags_all":{"Environment":"dev","ManagedBy":"Terraform","Project":"data-pipeline4","Purpose":"Data Lake Storage"},"timeouts":null,"versioning":[{"enabled":false,"mfa_delete":false}],"website":[],"website_domain":null,"website_endpoint":null},"sensitive_attributes":[],"private":"eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxMjAwMDAwMDAwMDAwLCJkZWxldGUiOjM2MDAwMDAwMDAwMDAsInJlYWQiOjEyMDAwMDAwMDAwMDAsInVwZGF0ZSI6MTIwMDAwMDAwMDAwMH19","dependencies":["data.aws_caller_identity.current"]}]},{"module":"module.data_lake_bucket","mode":"managed","type":"aws_s3_bucket_lifecycle_configuration","name":"this","provider":"provider[\"registry.opentofu.org/hashicorp/aws\"]","instances":[{"index_key":0,"schema_version":1,"attributes":{"bucket":"data-pipeline4-data-lake-616138583583","expected_bucket_owner":"","id":"data-pipeline4-data-lake-616138583583","region":"us-east-1","rule":[{"abort_incomplete_multipart_upload":[],"expiration":[],"filter":[{"and":[],"object_size_greater_than":null,"object_size_less_than":null,"prefix":"","tag":[]}],"id":"transition-to-ia","noncurrent_version_expiration":[{"newer_noncurrent_versions":null,"noncurrent_days":365}],"noncurrent_version_transition":[],"prefix":"","status":"Enabled","transition":[{"date":null,"days":30,"storage_class":"STANDARD_IA"},{"date":null,"days":90,"storage_class":"GLACIER"}]}],"timeouts":null,"transition_default_minimum_object_size":"all_storage_classes_128K"},"sensitive_attributes":[],"dependencies":["data.aws_caller_identity.current","module.data_lake_bucket.aws_s3_bucket.this","module.data_lake_bucket.aws_s3_bucket_versioning.this","module.data_lake_bucket.aws_s3_directory_bucket.this"]}]},{"module":"module.data_lake_bucket","mode":"managed","type":"aws_s3_bucket_ownership_controls","name":"this","provider":"provider[\"registry.opentofu.org/hashicorp/aws\"]","instances":[{"index_key":0,"schema_version":0,"attributes":{"bucket":"data-pipeline4-data-lake-616138583583","id":"data-pipeline4-data-lake-616138583583","region":"us-east-1","rule":[{"object_ownership":"BucketOwnerEnforced"}]},"sensitive_attributes":[],"private":"bnVsbA==","dependencies":["data.aws_caller_identity.current","module.data_lake_bucket.aws_s3_bucket.this","module.data_lake_bucket.aws_s3_bucket_policy.this","module.data_lake_bucket.aws_s3_bucket_public_access_block.this","module.data_lake_bucket.aws_s3_directory_bucket.this","module.data_lake_bucket.data.aws_caller_identity.current","module.data_lake_bucket.data.aws_iam_policy_document.access_log_delivery","module.data_lake_bucket.data.aws_iam_policy_document.cloudtrail_log_delivery","module.data_lake_bucket.data.aws_iam_policy_document.combined","module.data_lake_bucket.data.aws_iam_policy_document.deny_incorrect_encryption_headers","module.data_lake_bucket.data.aws_iam_policy_document.deny_incorrect_kms_key_sse","module.data_lake_bucket.data.aws_iam_policy_document.deny_insecure_transport","module.data_lake_bucket.data.aws_iam_policy_document.deny_ssec_encrypted_object_uploads","module.data_lake_bucket.data.aws_iam_policy_document.deny_unencrypted_object_uploads","module.data_lake_bucket.data.aws_iam_policy_document.elb_log_delivery","module.data_lake_bucket.data.aws_iam_policy_document.inventory_and_analytics_destination_policy","module.data_lake_bucket.data.aws_iam_policy_document.lb_log_delivery","module.data_lake_bucket.data.aws_iam_policy_document.require_latest_tls","module.data_lake_bucket.data.aws_iam_policy_document.waf_log_delivery","module.data_lake_bucket.data.aws_partition.current","module.data_lake_bucket.data.aws_region.current"]}]},{"module":"module.data_lake_bucket","mode":"managed","type":"aws_s3_bucket_public_access_block","name":"this","provider":"provider[\"registry.opentofu.org/hashicorp/aws\"]","instances":[{"index_key":0,"schema_version":0,"attributes":{"block_public_acls":true,"block_public_policy":true,"bucket":"data-pipeline4-data-lake-616138583583","id":"data-pipeline4-data-lake-616138583583","ignore_public_acls":true,"region":"us-east-1","restrict_public_buckets":true,"skip_destroy":null},"sensitive_attributes":[],"private":"bnVsbA==","dependencies":["data.aws_caller_identity.current","module.data_lake_bucket.aws_s3_bucket.this"]}]},{"module":"module.data_lake_bucket","mode":"managed","type":"aws_s3_bucket_server_side_encryption_configuration","name":"this","provider":"provider[\"registry.opentofu.org/hashicorp/aws\"]","instances":[{"index_key":0,"schema_version":0,"attributes":{"bucket":"data-pipeline4-data-lake-616138583583","expected_bucket_owner":"","id":"data-pipeline4-data-lake-616138583583","region":"us-east-1","rule":[{"apply_server_side_encryption_by_default":[{"kms_master_key_id":"","sse_algorithm":"aws:kms"}],"bucket_key_enabled":true}]},"sensitive_attributes":[],"private":"bnVsbA==","dependencies":["data.aws_caller_identity.current","module.data_lake_bucket.aws_s3_bucket.this","module.data_lake_bucket.aws_s3_directory_bucket.this"]}]},{"module":"module.data_lake_bucket","mode":"managed","type":"aws_s3_bucket_versioning","name":"this","provider":"provider[\"registry.opentofu.org/hashicorp/aws\"]","instances":[{"index_key":0,"schema_version":0,"attributes":{"bucket":"data-pipeline4-data-lake-616138583583","expected_bucket_owner":"","id":"data-pipeline4-data-lake-616138583583","mfa":null,"region":"us-east-1","versioning_configuration":[{"mfa_delete":"","status":"Enabled"}]},"sensitive_attributes":[],"private":"bnVsbA==","dependencies":["data.aws_caller_identity.current","module.data_lake_bucket.aws_s3_bucket.this"]}]}],"check_results":null}
